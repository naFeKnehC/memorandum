# 产品需求文档（PRD）— Memorandum 桌面端代办清单

本文档为实现与验收的唯一事实来源（SSOT）。修改本文件即代表需求变更。

## 1. 产品背景与愿景
- 背景：提供轻量、专注、可置顶的桌面待办工具，适合办公场景的“随手记与随手看”。
- 愿景：高效记录与查看“今天要做什么”，减少误触与打断，离线可用。

## 2. 目标用户与场景
- 目标用户：桌面端重度用户（程序员、产品、设计、运营）。
- 关键场景：
  - 快速添加并默认归入“今天”。
  - 置顶小窗始终可见；需要时锁定防误触。
  - 到期提醒与简单搜索/筛选。

## 3. 目标与非目标
- 目标：专注单机离线、日期分组、置顶与锁定的极简代办。
- 非目标（本期不做）：跨端云同步、复杂项目管理、多人协作。

## 4. MVP 范围（必须）
- 日期分组：今天/明天/本周/以后/无日期/已完成。
- 输入自动定位“今天”：启动/唤起时聚焦“今天”输入框并滚动到位。
- 桌面置顶：窗口置顶开关，状态持久化。
- 锁定防误触：锁定后仅允许滚动与复制；解锁需快捷键或按钮。
- 基本操作：新增/编辑/完成/删除（带撤销）、拖拽排序、搜索。
- 数据持久化：本地 SQLite 或 JSON（二选一，后续可迁移）。

## 5. 迭代项（可选）
- 自然语言日期解析（如“明天 9:00/周五”）。
- 循环任务、子任务、标签与优先级。
- 通知提醒（系统通知、延后提醒）。
- 托盘入口与快速添加面板。

## 6. 需求清单（功能级）
- 任务管理
  - [ ] 新增任务：输入框 Enter 添加；Shift+Enter 换行。
  - [ ] 编辑任务：行内编辑；Esc 取消、Enter 保存。
  - [ ] 完成/撤销完成：勾选切换，提供 3–5 秒撤销条。
  - [ ] 删除：二次确认或延时撤销。
  - [ ] 拖拽排序：同组内排序，锁定时禁用。
- 日期分组
  - [ ] 动态分组：今天/明天/本周/以后/无日期/已完成。
  - [ ] 跨日重算：本地午夜后自动刷新并滚动到“今天”。
- 输入自动定位
  - [ ] 启动/唤起时聚焦“今天”输入框并高亮分组标题。
  - [ ] 快捷键快速添加（Cmd/Ctrl+N）。
- 桌面置顶
  - [ ] 置顶开关，状态持久化（Settings）。
  - [ ] 可选小窗模式（后续）。
- 锁定防误触
  - [ ] 锁定模式：禁用点击/拖拽/勾选/删除，仅滚动与复制。
  - [ ] 解锁：按钮或快捷键（建议 Cmd/Ctrl+L）。
  - [ ] 可选“点击穿透”（后续）。
- 搜索与筛选
  - [ ] 关键词搜索（Cmd/Ctrl+K），高亮匹配。
- 数据与备份
  - [ ] 本地存储（SQLite/JSON），崩溃安全写入。
  - [ ] 导出/导入（JSON）。

## 7. 交互与信息架构（概要）
- 视图结构：顶部工具栏（置顶、锁定、搜索）+ 分组列表（今天等）。
- 键盘：
  - Enter 添加，Shift+Enter 换行。
  - Cmd/Ctrl+N 快速添加；Cmd/Ctrl+K 搜索；Cmd/Ctrl+L 锁定/解锁。
- 安全交互：删除与完成提供撤销条；锁定模式有明显提示条。

## 8. 数据模型（草案）
- Task：`id, title, description?, dueDate?, time?, status, order, createdAt, updatedAt, completedAt?`
- Settings：`alwaysOnTop, lockMode, theme, compactMode`

## 9. 非功能需求
- 性能：5k+ 任务流畅（虚拟列表）。
- 稳定：自动保存、异常恢复、撤销/重做。
- 隐私：数据本地优先、无外发。
- 可访问性：键盘可用、对比度合规。

## 10. 里程碑与验收
- M1（基础骨架）：分组视图、添加/完成/删除、定位“今天”。
- M2（系统集成）：置顶、锁定、设置持久化、搜索。
- M3（打磨）：通知提醒、导入导出、虚拟列表优化。
验收：基于本 PRD 的需求清单打勾并完成手测用例。

## 11. 开放问题（请在此补充）
- [ ] 本地存储首选 SQLite 还是 JSON？
- [ ] 目标平台范围（macOS/Windows/Linux）？
- [ ] 技术栈（Tauri+React/Vue/Svelte 或 SwiftUI/Electron）？
- [ ] 是否纳入托盘与提醒到 MVP？

---
注：你可直接在本文件修改需求与优先级，我将按最新内容推进实现。
